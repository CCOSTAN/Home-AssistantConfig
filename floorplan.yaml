name: Floorplan
image: /local/custom_ui/floorplan/floorplan.svg
stylesheet: /local/custom_ui/floorplan/floorplan.css

last_motion_entity: sensor.template_last_motion
last_motion_class: last-motion

groups:

  - name: Sensors
    entities:
       - sensor.melbourne_now
    text_template: '${entity.state ? entity.state : "unknown"}'
    class_template: '
      var temp = parseFloat(entity.state.replace("Â°", ""));
      if (temp < 10)
        return "temp-low";
      else if (temp < 30)
        return "temp-medium";
      else
        return "temp-high";
      '

  - name: Lights
    entities:
       - light.hallway
       - light.living_room
       - light.patio
    states:
      - state: 'on'
        class: 'light-on'
      - state: 'off'
        class: 'light-off'

  - name: Switches
    entities:
       - switch.doorbell
    states:
      - state: 'on'
        class: 'doorbell-on'
      - state: 'off'
        class: 'doorbell-off'

  - name: NVR
    entities:
       - binary_sensor.blue_iris_nvr
    text_template: '${(entity.state === "on") ? "online" : "offline"}'
    states:
      - state: 'off'
        class: 'danger-text'
      - state: 'on'
        class: 'success-text'

  - name: Alarm Panel
    entities:
       - alarm_control_panel.alarm
    states:
      - state: 'armed_away'
        class: 'alarm-armed'
      - state: 'armed_home'
        class: 'alarm-armed'
      - state: 'disarmed'
        class: 'alarm-disarmed'

  - name: Nest Protects
    entities:
      - binary_sensor.upstairs_living_room_nest_protect_online
      - binary_sensor.hallway_nest_protect_kids_hallway_online
      - binary_sensor.justins_room_nest_protect_online
      - binary_sensor.kitchen_nest_protect_online
      - binary_sensor.master_bedroom_nest_protect_online
      - binary_sensor.master_hallway_nest_protect_online
      - binary_sensor.paiges_room_nest_protect_paiges_room_online
      - binary_sensor.upstairs_bedroom_nest_protect_online
      - binary_sensor.office_nest_protect_online
    states:
      - state: 'off'
        class: 'info-background'
      - state: 'on'
        class: 'warning-background'
    state_transitions:
      - name: On to off
        from_state: 'on'
        to_state: 'off'
        duration: 10

  - name: Cameras
    entities:
      - camera.hallway
      - camera.driveway
      - camera.front_door
      - camera.backyard
    states:
      - state: 'idle'
        class: 'camera-idle'
